#!/bin/bash

options=""
if [ -t 0 ]; then
  options="${options} --tty"
fi

docker build --tag order-management-test --quiet --file Dockerfile.dev . &> /dev/null &&
docker run \
  --rm${options} -i \
  --net=host \
  -v /var/run/docker.sock:/var/run/docker.sock \
  -v $(pwd):$(pwd) \
  -w $(pwd) \
  -e HOME \
  -e PYTHONPATH=$(pwd)/features/support/ \
  order-management-test "$@"
